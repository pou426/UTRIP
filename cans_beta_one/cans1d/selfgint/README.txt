

CANS1D selfg モジュール

       ver.0.2       2002.3.1 

----------------------------------------------------------------------

◯概要

このモジュールは、自己重力を計算をするためのものです。

----------------------------------------------------------------------

◯インストール

1. Makefileを編集。マクロ"CANS_LIB_DIR"の値を適当に設定する。
2. makeによりコンパイル。

----------------------------------------------------------------------

◯使用法

CANS1Dディストリビューションのmd_cloudやmd_clspを参考にする。

(開始)
初期処理
    モデル・パラメータの定義
      物理量ro pr、グリッドx dx dxmなど。
      パラメータ g0 が必須。
      
時間積分ループ
    時間刻み決定 dt
    重心決定
        call getmc(xmc,ro,x,dxm,ix)
    自己重力積分
        call selfg(gx,gxm,g0,ro,xmc,x,dx,dxm,ix)
    境界条件
    負値チェック
時間積分ループ脱出分岐テスト
終了処理
(終了)

----------------------------------------------------------------------

◯使用する外部サブルーチン

なし

----------------------------------------------------------------------

◯各サブルーチンと引数の説明。

selfg(gx,gxm,g0,ro,xmc,x,dx,dxm,ix,margin)
selfg_c(gx,gxm,g0,ro,xmc,sc,x,dx,dxm,ix,margin)
  目的
    自己重力を求める
  出力
    gx(ix) gxm(ix)    重力配列
    pr(ix)     圧力配列
  入力
    dt 時間刻み
    g0 重力強度を決めるパラメータ
      ro=1で一様な球体のr=1の表面での重力が4pi/3*g0
    xmc 重心の座標
    ro(ix)     密度配列
    x(ix) 座標
    dx(ix) グリッド刻み（グリッド点上で定義）
    dxm(ix) グリッド刻み（グリッド点間で定義）
    sc(ix)  断面積（グリッド点上で定義）
    ix    データの大きさ

-------------------------------------------

getmc(xmc,ro,x,dx,ix)
getmc_c(xmc,ro,sc,x,dx,ix)
  目的
    重心を求める
  出力
    xmc 重心の座標
  入力
    ro(ix)     密度配列
    x(ix) 座標
    dx(ix) グリッド刻み（グリッド点上で定義）
    ix    データの大きさ

-------------------------------------------
