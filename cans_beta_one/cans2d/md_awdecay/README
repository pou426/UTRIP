

CANS2D md_awdecay モデルパッケージ

       ver.0  2001.9.7

----------------------------------------------------------------------

◯概要

このモデルパッケージは、大振幅Alfven波の減衰不安定（Goldstein 1978）
問題のプログラムがはいっています。基礎方程式など問題設定の詳しい
説明はReadme.pdfを参照のこと。

キーワード  3成分MHD

----------------------------------------------------------------------
◯インストールと実行

1. Makefileを編集。マクロ"CDF_LIB_DIR"、
   "CANS_LIB_DIR"の値を適当に設定する。
2. makeによりコンパイル。
3. a.outができるのでこれを実行する。計算結果はファイルout.ncに出力。
4. 結果の可視化はIDLを使う。プロシジャrddt.proを使って読込み、pldt.pro
   でプロット。

----------------------------------------------------------------------

◯使用する外部モジュール

このモジュールは以下のモジュールに依存するので、
実行形式ファイルをつくるときに以下のどちらかの方法をとる。
  (1) ライブラリからリンクする
  (2) ソースをコピーしてコンパイルリンクする

-----------------------------
CANS2D hdmlw
CANS2D hdroe
CANS2D bc
CANS2D common
----------------------------------------------------------------------

◯各サブルーチンと引数の説明。

model(idf,ro,vx,vy,vz,bx,by,bz
     &    ,cs2,thini,margin,x,ix,y,jx)
  目的
    モデル（パラメータ・グリッド・初期条件）のセットアップ
  出力
    ro(ix,jx)     密度配列
    vx(ix,jx),vy(ix,jx),vz(ix,jx) 速度配列
    bx(ix,jx),by(ix,jx),bz(ix,jx)     磁場配列
    cs2 音速の2乗
    thini 初期条件で空間分布がある方向の角度
    x(ix),y(jx)   グリッドの座標
  入力   [...] は参照するべきモジュール名
    idf     出力データファイルの装置番号
    margin 境界条件のための袖のグリッド数
    ix,jx    データの大きさ
  内部パラメータ
    izero   座標がゼロ(x=0)になるグリッド番号

bnd(margin,ro,vx,vy,vz,bx,by,bz,az,ix,jx)
  目的
    境界条件
  入出力
    ro(ix,jx)     密度配列
    vx(ix,jx),vy(ix,jx),vz(ix,jx) 速度配列
    bx(ix,jx),by(ix,jx),bz(ix,jx)     磁場配列
    az(ix,jx)     磁場ポテンシャル配列
  入力
    margin 境界条件のための袖のグリッド数
    ix,jx    データの大きさ

pertub(vx,x,ix)
  目的
    初期擾乱
  入出力
    vx(ix)     速度配列
  入力
    x(ix)   グリッドの座標
    ix    データの大きさ

----------------------------------------------------------------------

◯メインルーチンの説明 

＊計算の流れ

(開始)

初期処理(prologue)
    出力ファイルを開ける
    カウンターの初期化
    時刻コントロールのパラメータの設定
    モデルの設定
    計算準備
    グリッド・初期条件を出力

時間積分ループ(time integration)
    時間刻み決定 
    流体積分
    境界条件
    負値チェック
    データを出力
    時間積分ループ脱出分岐テスト

終了処理(epilogue)
    データを出力
    出力ファイルを閉じる
    終了メッセージ

(終了)

＊定数・配列定義

    ix,jx    データの大きさ

    x(ix),xm(ix),dx(ix),dxm(ix)   グリッド
    y(jx),ym(jx),dy(jx),dym(jx)   グリッド
    ro(ix,jx)     密度配列
    vx(ix,jx),vy(ix,jx),vz(ix,jx) 速度配列
    bx(ix,jx),by(ix,jx),bz(ix,jx)     磁場配列
    az(ix,jx)     磁場ポテンシャル配列

＊パラメータ

    margin 境界条件のための袖のグリッド数
    dtout  データを出力する時間刻み
    tend   計算を終了する時刻
    nstop  計算ループステップ数の臨界値。nsがこれを超えると計算終了。

----------------------------------------------------------------------
